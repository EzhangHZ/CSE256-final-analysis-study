["import sys\n\ndef minp():\n    return sys.stdin.readline().strip()\n\ndef mint():\n    return int(minp())\n\ndef mints():\n    return map(int, minp().split())\n\ndef solve():\n    n = mint()\n    b = [None] * n\n    i = 0\n    for v in mints():\n        b[i] = (v, i)\n        i += 1\n    b.sort()\n    c = [0] * n\n    ans = int(1000000000.0)\n    s = None\n    i = 0\n    while i < n:\n        j = i + 1\n        v = b[i][0]\n        while j < n and b[j][0] == v:\n            j += 1\n        if s is None:\n            for z in range(i, j):\n                c[z] = j - z - 1\n            ans = n - j\n        else:\n            k = s\n            while k < e and b[k][1] < b[i][1]:\n                k += 1\n            for z in range(i, j - 1):\n                c[z] = j - z - 1 + e\n            if k == e:\n                c[j - 1] = c[e - 1]\n            else:\n                c[j - 1] = s + e - k\n            v = n - i - j\n            for z in range(i, j):\n                while k < e and b[k][1] < b[z][1]:\n                    k += 1\n                ans = min(ans, z + (e if k == s else c[k - 1]) + v)\n        (s, e, i) = (i, j, j)\n    print(ans)\nfor i in range(mint()):\n    solve()", "import sys\n\ndef minp():\n    return sys.stdin.readline().strip()\n\ndef mint():\n    return int(minp())\n\ndef mints():\n    return map(int, minp().split())\n\ndef solve():\n    n = mint()\n    b = [None] * n\n    i = 0\n    for v in mints():\n        b[i] = (v, i)\n        i += 1\n    b.sort()\n    c = [0] * n\n    ans = int(1000000000.0)\n    s = None\n    i = 0\n    while i < n:\n        j = i + 1\n        v = b[i][0]\n        while j < n and b[j][0] == v:\n            j += 1\n        if s is None:\n            for z in range(i, j):\n                c[z] = j - z - 1\n            ans = n - j\n        else:\n            k = s\n            while k < e and b[k][1] < b[i][1]:\n                k += 1\n            for z in range(i, j - 1):\n                c[z] = j - z - 1 + e\n            if k == e:\n                c[j - 1] = c[e - 1]\n            else:\n                c[j - 1] = s + e - k\n            v = n - i - j\n            for z in range(i, j):\n                while k < e and b[k][1] < b[z][1]:\n                    k += 1\n                ans = min(ans, z + (e if k == s else c[k - 1]) + v)\n        (s, e, i) = (i, j, j)\n    print(ans)\nfor i in range(mint()):\n    solve()"]