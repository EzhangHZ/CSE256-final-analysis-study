["def solve(s):\n    open = close = 0\n    open_t = close_t = 0\n    for c in s:\n        if c == '(' or c == ')':\n            if c == '(':\n                open += 1\n            elif open > close:\n                close += 1\n        elif c == '[':\n            open_t += 1\n        elif open_t > close_t:\n            close_t += 1\n    return min(open, close) + min(open_t, close_t)\nt = int(input())\nwhile t:\n    s = input()\n    print(solve(s))\n    t -= 1", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "from sys import stdin, stdout\n\ndef hi(s, x, y):\n    (a, b) = (0, 0)\n    for c in s:\n        if c == y:\n            if a > 0:\n                a -= 1\n                b += 1\n        elif c == x:\n            a += 1\n    return b\nfor _ in range(int(input())):\n    s = input()\n    print(hi(s, '(', ')') + hi(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def check_sign(x, letf, right):\n    count = 0\n    check = 0\n    for i in x:\n        if i == right:\n            if check > 0:\n                check -= 1\n                count += 1\n        elif i == letf:\n            check += 1\n    return count\na = int(input())\nwhile a != 0:\n    st = str(input())\n    print(int(check_sign(st, '(', ')')) + int(check_sign(st, '[', ']')))\n    a -= 1", "for _ in range(int(input())):\n    x = input()\n    l = 0\n    m = 0\n    n = 0\n    for i in x:\n        if i == '[':\n            l += 1\n        elif i == '(':\n            m += 1\n        elif i == ']' and l > 0:\n            n += 1\n            l -= 1\n        elif i == ')' and m > 0:\n            n += 1\n            m -= 1\n    print(n)", "for _ in range(int(input())):\n    x = input()\n    l = 0\n    m = 0\n    n = 0\n    for i in x:\n        if i == '[':\n            l += 1\n        elif i == '(':\n            m += 1\n        elif i == ']' and l > 0:\n            n += 1\n            l -= 1\n        elif i == ')' and m > 0:\n            n += 1\n            m -= 1\n    print(n)", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def solve(bracket):\n    round_bracket = square_bracket = total_rbs = 0\n    for i in range(0, len(bracket)):\n        if bracket[i] == '(':\n            round_bracket += 1\n        elif bracket[i] == '[':\n            square_bracket += 1\n        elif bracket[i] == ')':\n            if round_bracket > 0:\n                total_rbs += 1\n                round_bracket -= 1\n        elif bracket[i] == ']':\n            if square_bracket > 0:\n                total_rbs += 1\n                square_bracket -= 1\n    return total_rbs\nt = int(input())\nfor _ in range(0, t):\n    bracket = input()\n    print(solve(bracket))", "for i in range(int(input())):\n    s = input()\n    l = [i for i in s]\n    (c, c1, sq) = (0, 0, 0)\n    for j in l:\n        if j == ')' or j == ']':\n            if j == ')' and c1 > 0:\n                c = c + 1\n                c1 = c1 - 1\n            elif j == ']' and sq > 0:\n                c = c + 1\n                sq = sq - 1\n        elif j == '(' or j == '[':\n            if j == '(':\n                c1 = c1 + 1\n            else:\n                sq = sq + 1\n    print(c)", "loopcount = int(input())\nfor loop in range(loopcount):\n    x = input()\n    fs = 0\n    ts = 0\n    output = 0\n    for i in x:\n        if i == '(':\n            fs += 1\n        elif i == '[':\n            ts += 1\n        elif fs > 0 and i == ')':\n            fs -= 1\n            output += 1\n        elif ts > 0 and i == ']':\n            ts -= 1\n            output += 1\n    print(output)", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def checker(s, a, b):\n    cnt = 0\n    switch = 0\n    for elem in s:\n        if elem == a:\n            switch += 1\n        elif elem == b and switch > 0:\n            switch -= 1\n            cnt += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(checker(s, '(', ')') + checker(s, '[', ']'))", "for i in range(int(input())):\n    s = input()\n    cnt = 0\n    cnt2 = 0\n    ans = 0\n    for i in s:\n        if i == '(':\n            cnt += 1\n        elif i == '[':\n            cnt2 += 1\n        elif i == ')' and cnt > 0:\n            ans += 1\n            cnt -= 1\n        elif i == ']' and cnt2 > 0:\n            ans += 1\n            cnt2 -= 1\n    print(ans)", "for _ in [0] * int(input()):\n    s = input()\n    d = {'(': 0, '[': 0}\n    pairs = 0\n    for i in s:\n        if i == '(':\n            d['('] += 1\n        elif i == '[':\n            d['['] += 1\n        elif i == ')':\n            if d['(']:\n                pairs += 1\n                d['('] -= 1\n        elif d['[']:\n            pairs += 1\n            d['['] -= 1\n    print(pairs)", "for _ in range(int(input())):\n    s = input()\n    max = [0, 0]\n    count = {'(': 0, '[': 0}\n    for i in s:\n        if i == '(':\n            count['('] += 1\n        elif i == ')' and count['('] >= 1:\n            count['('] -= 1\n            max[0] += 1\n        elif i == '[':\n            count['['] += 1\n        elif i == ']' and count['['] >= 1:\n            count['['] -= 1\n            max[1] += 1\n    print(max[0] + max[1])", "for _ in range(int(input())):\n    s = input()\n    (bra, par, res) = [0] * 3\n    for i in s:\n        if i == '[':\n            bra += 1\n        elif i == '(':\n            par += 1\n        elif i == ')' and par > 0:\n            res += 1\n            par -= 1\n        elif i == ']' and bra > 0:\n            res += 1\n            bra -= 1\n    print(res)", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def fun(st):\n    ob = '('\n    cb = ')'\n    osb = '['\n    csb = ']'\n    ls = []\n    count = 0\n    count_ob = 0\n    count_sob = 0\n    for i in st:\n        if i == ob or i == osb:\n            if i == ob:\n                count_ob += 1\n            else:\n                count_sob += 1\n        else:\n            if i == cb:\n                if count_ob > 0:\n                    count_ob -= 1\n                    count += 1\n            if i == csb:\n                if count_sob > 0:\n                    count_sob -= 1\n                    count += 1\n    print(count)\nT = int(input())\nfor i in range(T):\n    t = input()\n    fun(t)", "def find_max_ways(s):\n    count = c1 = c2 = 0\n    for i in s:\n        if i == '(':\n            c1 += 1\n        elif i == '[':\n            c2 += 1\n        if i == ')':\n            if c1 > 0:\n                count += 1\n                c1 -= 1\n        elif i == ']':\n            if c2 > 0:\n                count += 1\n                c2 -= 1\n    return count\nt = int(input())\nfor i in range(t):\n    s = input()\n    print(find_max_ways(s))", "inn = lambda : int(input())\ninm = lambda : map(int, input().split())\nins = lambda : str(input())\nina = lambda : list(map(int, input().split()))\n\ndef solve():\n    s = ins()\n    st1 = []\n    st2 = []\n    ans = 0\n    for i in s:\n        if i == '(':\n            st1.append(i)\n        elif i == ')' and len(st1):\n            ans += 1\n            st1.pop()\n        elif i == '[':\n            st2.append(i)\n        elif i == ']' and len(st2):\n            ans += 1\n            st2.pop()\n    print(ans)\n\ndef main():\n    t = 1\n    t = int(input())\n    for _ in range(t):\n        solve()\nmain()", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def f(s, x, y):\n    a = c = 0\n    for i in s:\n        if i == y:\n            if a > 0:\n                a -= 1\n                c += 1\n        if i == x:\n            a += 1\n    return c\nfor _ in range(int(input())):\n    s = input()\n    print(f(s, '(', ')') + f(s, '[', ']'))", "for i in range(int(input())):\n    s = input()\n    c1 = 0\n    c2 = 0\n    c = 0\n    for i in s:\n        if i == '(':\n            c1 += 1\n        elif i == '[':\n            c2 += 1\n        elif i == ')' and c1 > 0:\n            c1 -= 1\n            c += 1\n        elif i == ']' and c2 > 0:\n            c2 -= 1\n            c += 1\n    print(c)", "t = int(input())\nfor _ in range(t):\n    s = input()\n    r = tr = 0\n    ret = 0\n    for c in s:\n        if c == '(':\n            r += 1\n        elif c == '[':\n            tr += 1\n        elif c == ')':\n            if r > 0:\n                r -= 1\n                ret += 1\n        elif c == ']':\n            if tr > 0:\n                tr -= 1\n                ret += 1\n    print(ret)", "def solve():\n    s = input()\n    (os, op, cnt) = (0, 0, 0)\n    for i in s:\n        if i == '(':\n            op += 1\n        elif i == '[':\n            os += 1\n        elif i == ')' and op > 0:\n            op -= 1\n            cnt += 1\n        elif i == ']' and os > 0:\n            os -= 1\n            cnt += 1\n    print(cnt)\nt = int(input())\nfor _ in range(t):\n    solve()", "for _ in range(int(input())):\n    l = input()\n    (f, s, t) = (0, 0, 0)\n    for i in l:\n        if i == '(':\n            f += 1\n        elif i == '[':\n            s += 1\n        elif i == ')' and f > 0:\n            t += 1\n            f -= 1\n        elif i == ']' and s > 0:\n            t += 1\n            s -= 1\n    print(t)", "t = int(input())\nfor i in range(t):\n    s = input()\n    sc = 0\n    ss = 0\n    ct = 0\n    for c in s:\n        if c == '(':\n            sc += 1\n        elif c == '[':\n            ss += 1\n        elif c == ')':\n            if sc > 0:\n                ct += 1\n                sc -= 1\n        elif ss > 0:\n            ct += 1\n            ss -= 1\n    print(ct)", "roundies = ['(', ')']\nsquaries = ['[', ']']\nfor i in range(int(input())):\n    string = input()\n    rounds = [i for i in string if i in roundies]\n    squares = [i for i in string if i in squaries]\n    (count_rounds, count_round_openers) = (0, 0)\n    (count_squares, count_square_openers) = (0, 0)\n    for n in rounds:\n        if n == '(':\n            count_round_openers += 1\n        elif count_round_openers >= 1:\n            count_rounds += 1\n            count_round_openers -= 1\n    for x in squares:\n        if x == '[':\n            count_square_openers += 1\n        elif count_square_openers >= 1:\n            count_squares += 1\n            count_square_openers -= 1\n    print(count_squares + count_rounds)", "for _ in range(int(input())):\n    s = input()\n    (a, b, c) = (0, 0, 0)\n    for i in range(len(s)):\n        if s[i] == '(':\n            a += 1\n        elif s[i] == ')':\n            if a > 0:\n                c += 1\n                a -= 1\n        elif s[i] == '[':\n            b += 1\n        elif b > 0:\n            c += 1\n            b -= 1\n    print(c)", "def main():\n    t = int(input())\n    brackets = {'(': 1, ')': -1, '[': 2, ']': -2}\n    for _ in range(t):\n        count = 0\n        s = input()\n        stack1 = []\n        stack2 = []\n        for i in s:\n            if brackets[i] == 1:\n                stack1.append(i)\n            elif brackets[i] == 2:\n                stack2.append(i)\n            elif brackets[i] == -1:\n                if len(stack1) == 0:\n                    continue\n                if brackets[i] + brackets[stack1[-1]] == 0:\n                    stack1.pop()\n                    count += 1\n            else:\n                if len(stack2) == 0:\n                    continue\n                if brackets[i] + brackets[stack2[-1]] == 0:\n                    stack2.pop()\n                    count += 1\n        print(count)\nmain()", "for i in range(int(input())):\n    st = input()\n    ll = []\n    ll2 = []\n    s = 0\n    for j in st:\n        if j == '(':\n            ll.append(')')\n        elif j == '[':\n            ll2.append(']')\n        elif j == ')':\n            if len(ll) > 0 and j == ll.pop():\n                s += 1\n        elif j == ']':\n            if len(ll2) > 0 and j == ll2.pop():\n                s += 1\n    print(s)", "for _ in range(int(input())):\n    s = input()\n    (a, b, ans) = (0, 0, 0)\n    for i in s:\n        if i == '(':\n            a += 1\n        elif i == '[':\n            b += 1\n        elif i == ')' and a > 0:\n            ans += 1\n            a -= 1\n        elif i == ']' and b > 0:\n            ans += 1\n            b -= 1\n    print(ans)", "for _ in range(int(input())):\n    s = input()\n    (d, a) = ({'(': 0, '[': 0}, 0)\n    for i in s:\n        if i in d:\n            d[i] += 1\n        elif i == ')':\n            if d['('] > 0:\n                a += 1\n                d['('] -= 1\n        elif i == ']':\n            if d['['] > 0:\n                a += 1\n                d['['] -= 1\n    print(a)", "t = int(input())\nfor i in range(t):\n    s = input()\n    count = 0\n    ob = 0\n    cb = 0\n    op = 0\n    cp = 0\n    for j in s:\n        if j == '(':\n            op += 1\n        elif j == '[':\n            ob += 1\n        elif j == ')' and op > cp:\n            cp += 1\n        elif j == ']' and ob > cb:\n            cb += 1\n    print(cb + cp)", "import sys\ninput = sys.stdin.readline\ninputLines = sys.stdin.readlines\n\ndef readIntList():\n    return list(map(int, input().split()))\n\ndef readStrList():\n    return list(map(lambda x: x.strip(), inputLines()))\n\ndef indexOf(l: list, elem: int):\n    return l.index(elem) if elem in l else -1\n\ndef lastIndexOf(l: list, elem: int):\n    indexes = [idx for (idx, val) in enumerate(l) if val == elem]\n    return max(indexes) if len(indexes) > 0 else -1\n\ndef solution():\n    for _ in range(int(input())):\n        s = input()\n        c1 = 0\n        c2 = 0\n        counter = 0\n        for i in range(len(s)):\n            if s[i] == '(':\n                c1 += 1\n            if s[i] == ')' and c1 > 0:\n                counter += 1\n                c1 -= 1\n            if s[i] == '[':\n                c2 += 1\n            if s[i] == ']' and c2 > 0:\n                counter += 1\n                c2 -= 1\n        print(counter)\nsolution()", "for i in range(int(input())):\n    l = []\n    a = input()\n    count1 = countrev1 = count2 = countrev2 = 0\n    for i in a:\n        if i == '(':\n            count1 += 1\n        elif i == '[':\n            count2 += 1\n        elif i == ')' and count1 > 0:\n            count1 -= 1\n            countrev1 += 1\n        elif i == ']' and count2 > 0:\n            count2 -= 1\n            countrev2 += 1\n    print(countrev2 + countrev1)", "for i in range(int(input())):\n    l = []\n    a = input()\n    count1 = countrev1 = count2 = countrev2 = 0\n    for i in a:\n        if i == '(':\n            count1 += 1\n        elif i == '[':\n            count2 += 1\n        elif i == ')' and count1 > 0:\n            count1 -= 1\n            countrev1 += 1\n        elif i == ']' and count2 > 0:\n            count2 -= 1\n            countrev2 += 1\n    print(countrev2 + countrev1)", "for i in range(int(input())):\n    s = input()\n    x = 0\n    y = 0\n    z = 0\n    for i in s:\n        if i == '[':\n            y = y + 1\n        elif i == '(':\n            x = x + 1\n        elif i == ']' and y > 0:\n            z += 1\n            y -= 1\n        elif i == ')' and x > 0:\n            z += 1\n            x -= 1\n    print(z)", "cases = int(input())\nwhile cases:\n    cases -= 1\n    s = input()\n    (op1, cl1, op2, cl2) = (0, 0, 0, 0)\n    ans = 0\n    for let in s:\n        if let == '[':\n            op1 += 1\n        elif let == ']':\n            if op1 > 0:\n                ans += 1\n                op1 -= 1\n        elif let == '(':\n            op2 += 1\n        elif let == ')':\n            if op2 > 0:\n                ans += 1\n                op2 -= 1\n    print(ans)", "for _ in range(int(input())):\n    (x, y, c) = (0, 0, 0)\n    for i in input():\n        if i == '(':\n            x += 1\n        elif i == ')' and x:\n            x -= 1\n            c += 1\n        elif i == '[':\n            y += 1\n        elif i == ']' and y:\n            y -= 1\n            c += 1\n    print(c)", "t = int(input())\nfor _ in range(t):\n    s = input()\n    cnt1 = 0\n    cnt2 = 0\n    sum1 = 0\n    for i in s:\n        if i == '(':\n            cnt1 += 1\n        elif i == ')':\n            if cnt1 > 0:\n                cnt1 -= 1\n                sum1 += 1\n        elif i == '[':\n            cnt2 += 1\n        elif cnt2 > 0:\n            cnt2 -= 1\n            sum1 += 1\n    print(sum1)", "for _ in range(int(input())):\n    s = input()\n    (ofb, cfb, otb, ctb) = (0, 0, 0, 0)\n    for i in s:\n        if i == '(':\n            ofb += 1\n        if i == ')':\n            if not ofb == cfb:\n                cfb += 1\n        if i == '[':\n            otb += 1\n        if i == ']':\n            if not otb == ctb:\n                ctb += 1\n    print(cfb + ctb)", "t = int(input())\nfor i in range(t):\n    a = input()\n    c = 0\n    k = 0\n    d = 0\n    for j in a:\n        if j == '(':\n            k += 1\n        elif j == '[':\n            d += 1\n        elif j == ')' and k > 0:\n            c += 1\n            k -= 1\n        elif j == ']' and d > 0:\n            c += 1\n            d -= 1\n    print(c)", "def ct(l, c):\n    res = 0\n    stack = 0\n    for i in l:\n        if i == c:\n            stack += 1\n        elif stack > 0:\n            stack -= 1\n            res += 1\n    return res\nfor _ in range(int(input())):\n    s = input()\n    rb = []\n    sb = []\n    for i in s:\n        if i == '(' or i == ')':\n            rb.append(i)\n        else:\n            sb.append(i)\n    print(ct(rb, '(') + ct(sb, '['))", "for _ in range(int(input())):\n    s = input()\n    sq = ro = res = 0\n    for i in s:\n        if i == '(':\n            ro += 1\n        elif i == '[':\n            sq += 1\n        elif i == ')':\n            if ro > 0:\n                res += 1\n                ro -= 1\n        elif i == ']':\n            if sq > 0:\n                res += 1\n                sq -= 1\n    print(res)", "t = int(input())\nfor _ in range(t):\n    s = input()\n    (c1, c2) = (0, 0)\n    c = 0\n    for i in s:\n        if i == '(':\n            c1 += 1\n        elif i == ')' and c1 > 0:\n            c1 = c1 - 1\n            c += 1\n        if i == '[':\n            c2 += 1\n        elif i == ']' and c2 > 0:\n            c2 = c2 - 1\n            c += 1\n    print(c)", "for t in range(int(input())):\n    s = input()\n    a = 0\n    b = 0\n    ans = 0\n    for i in s:\n        if i == '(':\n            a += 1\n        elif i == '[':\n            b += 1\n        elif i == ')' and a > 0:\n            ans += 1\n            a -= 1\n        elif i == ']' and b > 0:\n            ans += 1\n            b -= 1\n    print(ans)", "n = int(input())\nfor i in range(n):\n    s = input()\n    c = 0\n    brace = 0\n    square = 0\n    for j in s:\n        if j == '(':\n            brace += 1\n        elif j == '[':\n            square += 1\n        elif j == ')' and brace > 0:\n            brace -= 1\n            c += 1\n        elif j == ']' and square > 0:\n            square -= 1\n            c += 1\n    print(c)", "for _ in range(int(input())):\n    s = input()\n    (a, b, an) = (0, 0, 0)\n    for i in s:\n        if i == '(':\n            a += 1\n        elif i == '[':\n            b += 1\n        elif i == ')' and a > 0:\n            an += 1\n            a -= 1\n        elif i == ']' and b > 0:\n            an += 1\n            b -= 1\n    print(an)", "for i in range(int(input())):\n    st = input()\n    c1 = 0\n    c2 = 0\n    move = 0\n    for j in st:\n        if j == '(':\n            c1 += 1\n        elif j == '[':\n            c2 += 1\n        elif j == ')' and c1 > 0:\n            c1 -= 1\n            move += 1\n        elif j == ']' and c2 > 0:\n            c2 -= 1\n            move += 1\n    print(move)", "for _ in range(int(input())):\n    s = input()\n    (x, y, c) = (0, 0, 0)\n    for i in s:\n        if i == '[':\n            x += 1\n        elif i == '(':\n            y += 1\n        elif i == ']' and x > 0:\n            x -= 1\n            c += 1\n        elif i == ')' and y > 0:\n            y -= 1\n            c += 1\n    print(c)", "t = int(input())\nwhile t:\n    t -= 1\n    s = input()\n    a = 0\n    b = 0\n    ans = 0\n    for i in s:\n        if i == '(':\n            a += 1\n        elif i == '[':\n            b += 1\n        elif i == ']' and b > 0:\n            ans += 1\n            b -= 1\n        elif i == ')' and a > 0:\n            ans += 1\n            a -= 1\n    print(ans)", "for _ in range(int(input())):\n    s = input()\n    a = []\n    b = []\n    cnt = 0\n    for let in s:\n        if let == '(':\n            a.append(let)\n        elif let == ')':\n            if a:\n                a.pop()\n                cnt += 1\n        elif let == '[':\n            b.append(let)\n        elif b:\n            b.pop()\n            cnt += 1\n    print(cnt)", "def solve():\n    s = input()\n    cnt = 0\n    fo = []\n    so = []\n    for i in range(len(s)):\n        if s[i] == '(':\n            fo.append(s[i])\n        elif s[i] == '[':\n            so.append(s[i])\n        elif s[i] == ')':\n            if len(fo) > 0:\n                fo.pop()\n                cnt += 1\n        elif s[i] == ']':\n            if len(so) > 0:\n                so.pop()\n                cnt += 1\n    return cnt\nt = int(input())\nfor i in range(t):\n    print(solve())", "t = int(input())\nwhile t:\n    st = input()\n    (s, r, nr, ns) = (0, 0, 0, 0)\n    for i in st:\n        if i == '[':\n            s += 1\n        if i == '(':\n            r += 1\n        if i == ']' and s > 0:\n            ns += 1\n            s -= 1\n        if i == ')' and r > 0:\n            nr += 1\n            r -= 1\n    print(nr + ns)\n    t -= 1", "for i in range(int(input())):\n    n = input()\n    s = 0\n    c = 0\n    ans = 0\n    for j in n:\n        if j == '[':\n            s += 1\n        elif j == '(':\n            c += 1\n        elif j == ']' and s > 0:\n            ans += 1\n            s -= 1\n        elif j == ')' and c > 0:\n            c -= 1\n            ans += 1\n    print(ans)", "for _ in range(int(input())):\n    a = input()\n    cnt1 = cnt2 = ans = 0\n    for i in a:\n        if i == '(':\n            cnt1 += 1\n        elif i == '[':\n            cnt2 += 1\n        elif i == ')' and cnt1 > 0:\n            cnt1 -= 1\n            ans += 1\n        elif i == ']' and cnt2 > 0:\n            cnt2 -= 1\n            ans += 1\n    print(ans)", "t = int(input())\nfor i in range(t):\n    s = input()\n    n = len(s)\n    (num1, num2, res) = (0, 0, 0)\n    for i in range(n):\n        if s[i] == '(':\n            num1 += 1\n        elif s[i] == ')':\n            if num1:\n                num1 -= 1\n                res += 1\n        elif s[i] == '[':\n            num2 += 1\n        elif num2:\n            num2 -= 1\n            res += 1\n    print(res)", "for _ in range(int(input())):\n    s = input()\n    x = s\n    y = s\n    x = x.replace('[', '')\n    x = x.replace(']', '')\n    y = y.replace('(', '')\n    y = y.replace(')', '')\n    stack = []\n    count = 0\n    for i in x:\n        if stack:\n            if stack[-1] == '(' and i == ')':\n                count += 1\n                stack.pop()\n            else:\n                stack.append(i)\n        else:\n            stack.append(i)\n    stack1 = []\n    count1 = 0\n    for i in y:\n        if stack1:\n            if stack1[-1] == '[' and i == ']':\n                count1 += 1\n                stack1.pop()\n            else:\n                stack1.append(i)\n        else:\n            stack1.append(i)\n    print(count1 + count)", "for _ in range(int(input())):\n    ans = 0\n    s = input()\n    b1 = b2 = 0\n    for i in range(len(s)):\n        if s[i] == '(':\n            b1 += 1\n        elif s[i] == ')':\n            if b1 <= 0:\n                continue\n            b1 -= 1\n            ans += 1\n        elif s[i] == '[':\n            b2 += 1\n        elif s[i] == ']':\n            if b2 <= 0:\n                continue\n            b2 -= 1\n            ans += 1\n    print(ans)", "for _ in range(int(input())):\n    s = input()\n    ro = 0\n    so = 0\n    c = 0\n    for i in range(len(s)):\n        if s[i] == '(':\n            ro += 1\n        elif s[i] == '[':\n            so += 1\n        elif s[i] == ')' and ro > 0:\n            ro -= 1\n            c += 1\n        elif s[i] == ']' and so > 0:\n            so -= 1\n            c += 1\n    print(c)", "for _ in range(int(input())):\n    (a, b, c) = (0, 0, 0)\n    for i in input():\n        if i == '(':\n            a += 1\n        elif i == ')':\n            (c, a) = (c + (a > 0), max(a - 1, 0))\n        elif i == '[':\n            b += 1\n        elif i == ']':\n            (c, b) = (c + (b > 0), max(b - 1, 0))\n    print(c)", "def get_nums():\n    return [int(x) for x in input().split()]\n\ndef solve(S):\n    ans = PA = SQ = 0\n    for c in S:\n        if c == '(':\n            PA += 1\n        elif c == '[':\n            SQ += 1\n        elif c == ')':\n            if PA:\n                ans += 1\n                PA -= 1\n        elif SQ:\n            ans += 1\n            SQ -= 1\n    return ans\n(T,) = get_nums()\nfor _ in range(T):\n    S = input()\n    print(solve(S))", "t = int(input())\nfor _ in range(t):\n    s = list(input())\n    c = 0\n    p_o = b_o = 0\n    for item in s:\n        if item == '(':\n            p_o += 1\n        elif item == '[':\n            b_o += 1\n        elif item == ')':\n            if p_o > 0:\n                p_o -= 1\n                c += 1\n        elif item == ']':\n            if b_o > 0:\n                b_o -= 1\n                c += 1\n    print(c)", "t = int(input())\n\ndef count(s, b, e):\n    res = 0\n    st = 0\n    for i in range(len(s)):\n        if s[i] == b:\n            st += 1\n        if s[i] == e:\n            if st > 0:\n                res += 1\n                st -= 1\n    return res\nfor _ in range(t):\n    s = input()\n    print(count(s, '(', ')') + count(s, '[', ']'))", "for _ in range(int(input())):\n    n = input()\n    lx = 0\n    ly = 0\n    ans = 0\n    for i in range(len(n)):\n        if n[i] == '(':\n            lx += 1\n        elif n[i] == ')':\n            if lx > 0:\n                ans += 1\n                lx -= 1\n        elif n[i] == '[':\n            ly += 1\n        elif ly > 0:\n            ans += 1\n            ly -= 1\n    print(ans)", "for _ in range(int(input())):\n    s = input()\n    curly = square = cnt = 0\n    for i in s:\n        if i == '(':\n            curly += 1\n        elif i == ')':\n            if curly > 0:\n                curly -= 1\n                cnt += 1\n        elif i == '[':\n            square += 1\n        elif square > 0:\n            square -= 1\n            cnt += 1\n    print(cnt)", "for _ in range(int(input())):\n    s = input()\n    temp = set()\n    a_open = 0\n    b_open = 0\n    ans = 0\n    for i in s:\n        if i == '[':\n            a_open += 1\n        elif i == '(':\n            b_open += 1\n        elif i == ']':\n            if a_open:\n                a_open -= 1\n                ans += 1\n        elif i == ')':\n            if b_open:\n                b_open -= 1\n                ans += 1\n    print(ans)", "t = int(input())\nwhile t != 0:\n    t -= 1\n    s = input()\n    b1 = 0\n    b2 = 0\n    ans = 0\n    for c in s:\n        if c == '(':\n            b1 += 1\n        elif c == ')':\n            if b1 > 0:\n                b1 -= 1\n                ans += 1\n        elif c == '[':\n            b2 += 1\n        elif c == ']':\n            if b2 > 0:\n                b2 -= 1\n                ans += 1\n    print(ans)", "t = int(input())\nfor _ in range(t):\n    s = input()\n    (res, round, square) = (0, 0, 0)\n    for c in s:\n        round += c == '('\n        square += c == '['\n        if c == ')' and round > 0:\n            round -= 1\n            res += 1\n        if c == ']' and square > 0:\n            square -= 1\n            res += 1\n    print(res)", "import sys\n\ndef minp():\n    return sys.stdin.readline().strip()\n\ndef mint():\n    return int(minp())\n\ndef mints():\n    return map(int, minp().split())\n\ndef solve():\n    s = minp()\n    s1 = 0\n    s2 = 0\n    res = 0\n    for c in s:\n        if c == '(':\n            s1 += 1\n        elif c == ')':\n            if s1 > 0:\n                s1 -= 1\n                res += 1\n        elif c == '[':\n            s2 += 1\n        elif c == ']':\n            if s2 > 0:\n                s2 -= 1\n                res += 1\n    print(res)\nfor i in range(mint()):\n    solve()", "def solve(line):\n    totalCount = 0\n    (cnt1, cnt2) = (0, 0)\n    for ch in line:\n        if ch == '(':\n            cnt1 += 1\n        elif ch == '[':\n            cnt2 += 1\n        elif ch == ')' and cnt1 >= 1:\n            cnt1 -= 1\n            totalCount += 1\n        elif ch == ']' and cnt2 >= 1:\n            cnt2 -= 1\n            totalCount += 1\n    return totalCount\nn = int(input())\nfor _ in range(n):\n    print(solve(input()))", "def run():\n    t = int(input())\n    for _ in range(t):\n        s = input()\n        counter = 0\n        c_ro = 0\n        c_sq = 0\n        for c in s:\n            if c == '[':\n                c_sq += 1\n            elif c == '(':\n                c_ro += 1\n            elif c == ']':\n                if c_sq > 0:\n                    c_sq -= 1\n                    counter += 1\n            elif c == ')':\n                if c_ro > 0:\n                    c_ro -= 1\n                    counter += 1\n        print(counter)\nrun()", "def solve():\n    t = int(input())\n    for _ in range(t):\n        s = input()\n        (leftb1, leftb2) = (0, 0)\n        ans = 0\n        for x in s:\n            if x == '(':\n                leftb1 += 1\n            elif x == ')':\n                if leftb1 > 0:\n                    ans += 1\n                    leftb1 -= 1\n            elif x == '[':\n                leftb2 += 1\n            elif x == ']':\n                if leftb2 > 0:\n                    ans += 1\n                    leftb2 -= 1\n        print(ans)\nsolve()", "def answer():\n    (b1, b2) = (0, 0)\n    ans = 0\n    for st in s:\n        if st == '(':\n            b1 += 1\n        elif st == ')':\n            if b1:\n                b1 -= 1\n                ans += 1\n        elif st == '[':\n            b2 += 1\n        elif b2:\n            b2 -= 1\n            ans += 1\n    return ans\nfor T in range(int(input())):\n    s = input()\n    print(answer())", "import sys\n\ndef calcmaxrbs(input):\n    result = 0\n    cbrackets = []\n    sbrackets = []\n    for c in input:\n        if c == '[':\n            sbrackets.append('[')\n        elif c == '(':\n            cbrackets.append('(')\n        elif c == ')':\n            if len(cbrackets) != 0:\n                cbrackets.pop()\n                result = result + 1\n        elif c == ']':\n            if len(sbrackets) != 0:\n                sbrackets.pop()\n                result = result + 1\n    return result\ntestcase_flag = True\ncount = 0\ntestCaseCount = 0\ncosts = []\nfor line in sys.stdin:\n    inputs = [x for x in line.strip().split()]\n    if testcase_flag:\n        testCaseCount = int(inputs[0])\n        testcase_flag = False\n        continue\n    input = inputs[0]\n    costs.append(calcmaxrbs(input))\n    count = count + 1\n    if count == testCaseCount:\n        break\nfor i in range(testCaseCount):\n    print(costs[i])", "def solve():\n    string = list(input().strip())\n    d = {'(': 0, '[': 0}\n    ans = 0\n    for s in string:\n        if s in d:\n            d[s] += 1\n        elif s == ')':\n            if d['('] > 0:\n                ans += 1\n                d['('] -= 1\n        elif s == ']':\n            if d['['] > 0:\n                d['['] -= 1\n                ans += 1\n    return ans\nfor _ in range(int(input().strip())):\n    print(solve())", "def solve(st):\n    (a, b, ans) = (0, 0, 0)\n    for it in st:\n        if it == '(':\n            a += 1\n        elif it == ')':\n            if a > 0:\n                (ans, a) = (ans + 1, a - 1)\n        elif it == '[':\n            b += 1\n        elif b > 0:\n            (ans, b) = (ans + 1, b - 1)\n    return ans\nfor case in range(int(input())):\n    st = input()\n    ans = solve(st)\n    print(ans)", "def print_hi(s):\n    (L1, R1, L2, R2, count) = (0, 0, 0, 0, 0)\n    for i in s:\n        if i == ')' and L1 != 0:\n            L1 = L1 - 1\n            count = count + 1\n        elif i == ']' and L2 != 0:\n            L2 = L2 - 1\n            count = count + 1\n        elif i == '(':\n            L1 = L1 + 1\n        elif i == '[':\n            L2 = L2 + 1\n    return count\nfor _ in range(int(input())):\n    str = input()\n    print(print_hi(str))", "def countBrackets(s, bracket1, bracket2):\n    a = 0\n    b = 0\n    for i in s:\n        if i == bracket1:\n            a += 1\n        elif i == bracket2 and a > b:\n            b += 1\n    return b\nt = int(input())\nfor i in range(t):\n    s = input()\n    result = countBrackets(s, '(', ')') + countBrackets(s, '[', ']')\n    print(result)", "t = int(input())\n\ndef solve():\n    moves = 0\n    s = input()\n    remb1 = 0\n    remb2 = 0\n    for i in s:\n        if i == '(':\n            remb1 += 1\n        elif i == ')':\n            if remb1 > 0:\n                moves += 1\n                remb1 -= 1\n        elif i == '[':\n            remb2 += 1\n        elif remb2 > 0:\n            moves += 1\n            remb2 -= 1\n    print(moves)\nfor i in range(t):\n    solve()", "def solve(s):\n    open1 = 0\n    open2 = 0\n    ans = 0\n    for x in s:\n        if x == '(':\n            open1 += 1\n        elif x == '[':\n            open2 += 1\n        elif x == ')' and open1 > 0:\n            ans += 1\n            open1 -= 1\n        elif x == ']' and open2 > 0:\n            ans += 1\n            open2 -= 1\n    return ans\nt = int(input())\nwhile t:\n    s = input()\n    print(solve(s))\n    t -= 1", "def twoBrackets(string):\n    matched_bracket = 0\n    paranthesis = 0\n    square = 0\n    for val in string:\n        if val == '(':\n            paranthesis += 1\n        elif val == ')' and paranthesis > 0:\n            paranthesis -= 1\n            matched_bracket += 1\n        elif val == '[':\n            square += 1\n        elif val == ']' and square > 0:\n            square -= 1\n            matched_bracket += 1\n    print(matched_bracket)\ntestcases = int(input())\nwhile testcases:\n    testcases -= 1\n    string = input()\n    twoBrackets(string)", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "import sys\nn = int(sys.stdin.readline())\n\ndef solver(x):\n    a = 0\n    b = 0\n    ret = 0\n    for c in x:\n        if c == '(':\n            a += 1\n        elif c == '[':\n            b += 1\n        if c == ')' and a > 0:\n            ret += 1\n            a -= 1\n        elif c == ']' and b > 0:\n            ret += 1\n            b -= 1\n    return ret\nfor _ in range(n):\n    print(solver(sys.stdin.readline().rstrip()))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def calc(s, x, y):\n    (bal, cnt) = (0, 0)\n    for c in s:\n        if c == y:\n            if bal > 0:\n                bal -= 1\n                cnt += 1\n        elif c == x:\n            bal += 1\n    return cnt\nfor _ in range(int(input())):\n    s = input()\n    print(calc(s, '(', ')') + calc(s, '[', ']'))", "def two_brackets(s):\n    normal_brackets = 0\n    square_brackets = 0\n    result = 0\n    for letter in s:\n        if letter == '(':\n            normal_brackets += 1\n        elif letter == '[':\n            square_brackets += 1\n        elif letter == ')' and normal_brackets > 0:\n            normal_brackets -= 1\n            result += 1\n        elif letter == ']' and square_brackets > 0:\n            square_brackets -= 1\n            result += 1\n    return result\nfor _ in range(int(input())):\n    s = input()\n    print(two_brackets(s))", "n = int(input())\nfor i in range(n):\n    str1 = input()\n    l = len(str1)\n    os = 0\n    ot = 0\n    cs = 0\n    ct = 0\n    e = 0\n    for j in range(l):\n        if str1[j] == '(':\n            os = os + 1\n        elif str1[j] == '[':\n            ot = ot + 1\n        elif str1[j] == ')' and os >= 1:\n            os = os - 1\n            e = e + 1\n        elif str1[j] == ']' and ot >= 1:\n            ot = ot - 1\n            e = e + 1\n    print(e)", "for _ in range(int(input())):\n    s = input()\n    z = 0\n    x = 0\n    flg = 0\n    for i in s:\n        if i == '(':\n            z += 1\n        if i == '[':\n            x += 1\n        if i == ')':\n            if z > 0:\n                z -= 1\n                flg += 1\n        if i == ']':\n            if x > 0:\n                x -= 1\n                flg += 1\n    print(flg)", "for _ in range(int(input())):\n    s = input()\n    (a, b, ans) = (0, 0, 0)\n    for i in s:\n        if i == '(':\n            a += 1\n        elif i == '[':\n            b += 1\n        elif i == ')' and a > 0:\n            ans += 1\n            a -= 1\n        elif i == ']' and b > 0:\n            ans += 1\n            b -= 1\n    print(ans)", "n = int(input())\nfor k in range(n):\n    x = input()\n    par = 0\n    cor = 0\n    sal = 0\n    for i in x:\n        if i == '(':\n            par += 1\n        if i == '[':\n            cor += 1\n        if i == ')':\n            if par > 0:\n                sal += 1\n                par -= 1\n        if i == ']':\n            if cor > 0:\n                sal += 1\n                cor -= 1\n    print(sal)", "t = int(input())\nwhile t:\n    s = input()\n    count = 0\n    r = 0\n    u = 0\n    for i in s:\n        if i == '(':\n            r += 1\n        elif i == ')':\n            if r > 0:\n                r -= 1\n                count += 1\n        if i == '[':\n            u += 1\n        elif i == ']' and u > 0:\n            u -= 1\n            count += 1\n    print(count)\n    t -= 1", "import sys\n\ndef get_single_int():\n    return int(sys.stdin.readline().strip())\n\ndef get_string():\n    return sys.stdin.readline().strip()\n\ndef get_ints():\n    return map(int, sys.stdin.readline().strip().split())\n\ndef get_list():\n    return list(map(int, sys.stdin.readline().strip().split()))\nfor i in range(get_single_int()):\n    s = get_string()\n    available_first = 0\n    available_second = 0\n    ans = 0\n    for j in s:\n        if j == '(':\n            available_first += 1\n        elif j == ')':\n            if available_first >= 1:\n                available_first -= 1\n                ans += 1\n            else:\n                continue\n        elif j == '[':\n            available_second += 1\n        elif j == ']':\n            if available_second >= 1:\n                available_second -= 1\n                ans += 1\n            else:\n                continue\n    print(ans)"]