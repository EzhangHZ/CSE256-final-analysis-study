["import sys\ninput = sys.stdin.readline\n(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "import sys\ninput = sys.stdin.readline\n(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "(n, m) = map(int, input().split())\ns = [input() for i in range(n)]\nmod = 998244353\ninv = 499122177\n(w, res) = (0, 0)\nfor i in range(n):\n    (even, odd) = (0, 1)\n    for j in range(m):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\n            w += 1\nfor j in range(m):\n    (even, odd) = (0, 1)\n    for i in range(n):\n        if s[i][j] == '*':\n            (even, odd) = (0, 1)\n        else:\n            res += even * inv\n            (even, odd) = (odd * inv, even * inv + inv)\n            even %= mod\n            odd %= mod\n            res %= mod\nfor i in range(w):\n    res = 2 * res % mod\nprint(res)", "mod = 998244353\n(n, m) = map(int, input().split())\na = [0] * n\ndp = [0] * n\ndp2 = [0] * n\nP = [0] * 300005\nfor i in range(n):\n    dp[i] = [0] * m\n    dp2[i] = [0] * m\nfor i in range(n):\n    a[i] = list(input())\ncnt = 0\nfor i in range(n):\n    for j in range(m):\n        if a[i][j] == 'o':\n            cnt += 1\nans = 0\nP[2] = pow(2, cnt - 2, mod)\nP[3] = pow(2, cnt - 3, mod)\nfor i in range(3, max(m, n) + 1):\n    P[i] = (P[3] + pow(4, -1, mod) * P[i - 2]) % mod\nfor i in range(n):\n    for j in range(m):\n        if a[i][j] == 'o':\n            dp[i][j] = dp[i][j - 1] + 1\n        if dp[i][j] >= 2:\n            ans = (ans + P[dp[i][j]]) % mod\nfor i in range(m):\n    for j in range(n):\n        if a[j][i] == 'o':\n            dp2[j][i] = dp2[j - 1][i] + 1\n        if dp2[j][i] >= 2:\n            ans = (ans + P[dp2[j][i]]) % mod\nprint(ans)"]