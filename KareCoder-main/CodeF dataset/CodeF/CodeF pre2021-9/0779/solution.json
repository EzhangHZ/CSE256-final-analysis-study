["import sys\ninput = lambda : sys.stdin.readline().rstrip()\n\ndef calc(A):\n    N = len(A)\n    if N == 1:\n        return 0\n    X = [0] * N\n    for a in A:\n        X[a] += 1\n    if max(X) > (N + 1) // 2:\n        return -1\n    Y = [0] * N\n    Y[A[0]] += 1\n    Y[A[-1]] += 1\n    for (a, b) in zip(A, A[1:]):\n        if a == b:\n            Y[a] += 2\n    (su, ma) = (sum(Y), max(Y))\n    cc = su - ma\n    return su // 2 - 1 + max(ma - cc - 2, 0) // 2\nT = int(input())\nfor _ in range(T):\n    N = int(input())\n    A = [int(a) - 1 for a in input().split()]\n    print(calc(A))", "def calc(A):\n    N = len(A)\n    if N == 1:\n        return 0\n    X = [0] * N\n    for a in A:\n        X[a] += 1\n    if max(X) > (N + 1) // 2:\n        return -1\n    Y = [0] * N\n    Y[A[0]] += 1\n    Y[A[-1]] += 1\n    for (a, b) in zip(A, A[1:]):\n        if a == b:\n            Y[a] += 2\n    (su, ma) = (sum(Y), max(Y))\n    cc = su - ma\n    return su // 2 - 1 + max(ma - cc - 2, 0) // 2\nfor _ in range(int(input())):\n    N = int(input())\n    print(calc([int(a) - 1 for a in input().split()]))", "def calc(A):\n    N = len(A)\n    if N == 1:\n        return 0\n    X = [0] * N\n    for a in A:\n        X[a] += 1\n    if max(X) > (N + 1) // 2:\n        return -1\n    Y = [0] * N\n    Y[A[0]] += 1\n    Y[A[-1]] += 1\n    for (a, b) in zip(A, A[1:]):\n        if a == b:\n            Y[a] += 2\n    (su, ma) = (sum(Y), max(Y))\n    cc = su - ma\n    return su // 2 - 1 + max(ma - cc - 2, 0) // 2\nT = int(input())\nfor _ in range(T):\n    N = int(input())\n    A = [int(a) - 1 for a in input().split()]\n    print(calc(A))"]