["def main():\n    N = int(input())\n    A = list(map(int, input().split()))\n    cnt = 0\n    for a in A:\n        if a > 0:\n            cnt += 1\n    if cnt <= 1:\n        print(0)\n        return\n    M = [0] * 31\n    for i in range(30, 0, -1):\n        m = 0\n        now = 0\n        diff = 0\n        for a in A:\n            if a > i:\n                m = 0\n                now = 0\n                continue\n            now += a\n            if diff < now - m:\n                diff = now - m\n            if now < m:\n                m = now\n        M[i] = diff\n    print(max([M[i] - i for i in range(31)]))\nmain()", "def main():\n    (N, A, cnt) = (int(input()), list(map(int, input().split())), 0)\n    for a in A:\n        if a > 0:\n            cnt += 1\n    if cnt <= 1:\n        print(0)\n        return\n    M = [0] * 31\n    for i in range(30, 0, -1):\n        (m, now, diff) = (0, 0, 0)\n        for a in A:\n            if a > i:\n                (m, now) = (0, 0)\n                continue\n            now += a\n            if diff < now - m:\n                diff = now - m\n            if now < m:\n                m = now\n        M[i] = diff\n    print(max([M[i] - i for i in range(31)]))\nmain()", "def solve():\n    n = int(input())\n    l = list(map(int, input().split()))\n    count = 0\n    for i in l:\n        if i > 0:\n            count += 1\n    if count <= 1:\n        print(0)\n        return\n    arr = [0] * 31\n    for i in range(30, 0, -1):\n        a = 0\n        b = 0\n        sub = 0\n        for y in l:\n            if y > i:\n                a = 0\n                b = 0\n                continue\n            b += y\n            if sub < b - a:\n                sub = b - a\n            if b < a:\n                a = b\n        arr[i] = sub\n    print(max([arr[i] - i for i in range(31)]))\nsolve()", "def main():\n    N = int(input())\n    A = list(map(int, input().split()))\n    cnt = 0\n    for a in A:\n        if a > 0:\n            cnt += 1\n    if cnt <= 1:\n        print(0)\n        return\n    M = [0] * 31\n    for i in range(30, 0, -1):\n        m = 0\n        now = 0\n        diff = 0\n        for a in A:\n            if a > i:\n                m = 0\n                now = 0\n                continue\n            now += a\n            if diff < now - m:\n                diff = now - m\n            if now < m:\n                m = now\n        M[i] = diff\n    print(max([M[i] - i for i in range(31)]))\nmain()", "from sys import stdin\ninput = stdin.readline\n\ndef main():\n    test = 1\n    for _ in range(test):\n        n = int(input())\n        ara = [int(x) for x in input().split()]\n        ans = 0\n        for mx in range(min(ara), max(ara) + 1):\n            sum = 0\n            for x in ara:\n                sum += x\n                if x > mx or sum < 0:\n                    sum = 0\n                    continue\n                ans = max(ans, sum - mx)\n        print(ans)\nmain()", "from copy import deepcopy\n\ndef max_sub(L: list) -> int:\n    j = -1\n    cur = 0\n    max_sum = 0\n    while len(L) != (j := (j + 1)):\n        cur += L[j]\n        if cur < 0:\n            cur = 0\n            continue\n        if cur > max_sum:\n            max_sum = cur\n    return max_sum\n\ndef compute(L: list) -> int:\n    L_dup = deepcopy(L)\n    cur = 0\n    for i in range(30, 0, -1):\n        L_dup = [-30 * 10000000.0 if x > i else x for x in L_dup]\n        max_sum = max_sub(L_dup)\n        if cur < max_sum - i:\n            cur = max_sum - i\n    return cur\nn = int(input())\nL = [int(x) for x in input().split()]\nprint(compute(L))"]