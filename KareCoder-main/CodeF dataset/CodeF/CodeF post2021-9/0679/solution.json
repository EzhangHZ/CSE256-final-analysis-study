["import sys\ninput = sys.stdin.readline\nfor _ in range(int(input())):\n    s = input().strip()\n    n = len(s)\n    odd = [0]\n    even = [0]\n    for i in range(n):\n        if s[i] == '[' or s[i] == ']':\n            if i % 2 == 0:\n                even.append(even[-1] + 1)\n                odd.append(odd[-1])\n            else:\n                odd.append(odd[-1] + 1)\n                even.append(even[-1])\n        else:\n            even.append(even[-1])\n            odd.append(odd[-1])\n    for query in range(int(input())):\n        (l, r) = [int(x) for x in input().split(' ')]\n        oddS = odd[r] - odd[l - 1]\n        evenS = even[r] - even[l - 1]\n        print(abs(oddS - evenS))", "import sys\ninput = sys.stdin.readline\nt = int(input())\nfor tests in range(t):\n    X = input().strip()\n    n = len(X)\n    R = [0]\n    L = [0]\n    for i in range(n):\n        if i % 2 == 0:\n            if X[i] == '[' or X[i] == ']':\n                R.append(R[-1] + 1)\n            else:\n                R.append(R[-1])\n            L.append(L[-1])\n        else:\n            if X[i] == '[' or X[i] == ']':\n                L.append(L[-1] + 1)\n            else:\n                L.append(L[-1])\n            R.append(R[-1])\n    q = int(input())\n    for queries in range(q):\n        (l, r) = map(int, input().split())\n        RS = R[r] - R[l - 1]\n        LS = L[r] - L[l - 1]\n        print(abs(RS - LS))", "import sys\ninput = sys.stdin.readline\nfor tests in range(int(input())):\n    X = input().strip()\n    n = len(X)\n    R = [0]\n    L = [0]\n    for i in range(n):\n        if i % 2 == 0:\n            R.append(R[-1] + 1 if X[i] == '[' or X[i] == ']' else R[-1])\n            L.append(L[-1])\n        else:\n            L.append(L[-1] + 1 if X[i] == '[' or X[i] == ']' else L[-1])\n            R.append(R[-1])\n    for queries in range(int(input())):\n        (l, r) = map(int, input().split())\n        RS = R[r] - R[l - 1]\n        LS = L[r] - L[l - 1]\n        print(abs(RS - LS))", "import sys\ninput = sys.stdin.readline\nt = int(input())\nfor tests in range(t):\n    X = input().strip()\n    n = len(X)\n    R = [0]\n    L = [0]\n    for i in range(n):\n        if i % 2 == 0:\n            if X[i] == '[' or X[i] == ']':\n                R.append(R[-1] + 1)\n            else:\n                R.append(R[-1])\n            L.append(L[-1])\n        else:\n            if X[i] == '[' or X[i] == ']':\n                L.append(L[-1] + 1)\n            else:\n                L.append(L[-1])\n            R.append(R[-1])\n    for i in range(int(input())):\n        (l, r) = map(int, input().split())\n        RS = R[r] - R[l - 1]\n        LS = L[r] - L[l - 1]\n        print(abs(RS - LS))", "import sys\ninput = sys.stdin.readline\nt = int(input())\nfor tests in range(t):\n    X = input().strip()\n    n = len(X)\n    R = [0]\n    L = [0]\n    for i in range(n):\n        if i % 2 == 0:\n            if X[i] == '[' or X[i] == ']':\n                R.append(R[-1] + 1)\n            else:\n                R.append(R[-1])\n            L.append(L[-1])\n        else:\n            if X[i] == '[' or X[i] == ']':\n                L.append(L[-1] + 1)\n            else:\n                L.append(L[-1])\n            R.append(R[-1])\n    for i in range(int(input())):\n        (l, r) = map(int, input().split())\n        RS = R[r] - R[l - 1]\n        LS = L[r] - L[l - 1]\n        print(abs(RS - LS))"]