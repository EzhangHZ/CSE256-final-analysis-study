["import sys\ninput = sys.stdin.readline\nfrom collections import deque\n\ndef process(a, n):\n    b = [0] * n\n    b[0] = a[0]\n    for i in range(1, n):\n        b[i] = a[i] - b[i - 1]\n    return b\n\ndef check(a, b, n):\n    c = deque([])\n    c.append([0, 1])\n    d = deque([])\n    count = 0\n    for i in range(n):\n        if i % 2 == 0:\n            while c and c[-1][0] > b[i]:\n                c.pop()\n            if c and c[-1][0] == b[i]:\n                count += c[-1][1]\n                c[-1][1] += 1\n            else:\n                c.append([b[i], 1])\n            while d and b[i] < -d[0][0]:\n                d.popleft()\n            if d and b[i] == -d[0][0]:\n                count += d[0][1]\n        else:\n            while c and b[i] < -c[0][0]:\n                c.popleft()\n            if c and b[i] == -c[0][0]:\n                count += c[0][1]\n            while d and d[-1][0] > b[i]:\n                d.pop()\n            if d and d[-1][0] == b[i]:\n                count += d[-1][1]\n                d[-1][1] += 1\n            else:\n                d.append([b[i], 1])\n    return count\nfor _ in range(int(input())):\n    n = int(input())\n    a = [int(i) for i in input().split()]\n    print(check(a, process(a, n), n))", "import sys\ninput = sys.stdin.readline\nfrom collections import deque\n\ndef process(a, n):\n    b = [0] * n\n    b[0] = a[0]\n    for i in range(1, n):\n        b[i] = a[i] - b[i - 1]\n    return b\n\ndef check(a, b, n):\n    c = deque([])\n    c.append([0, 1])\n    d = deque([])\n    count = 0\n    for i in range(n):\n        if i % 2 == 0:\n            while c and c[-1][0] > b[i]:\n                c.pop()\n            if c and c[-1][0] == b[i]:\n                count += c[-1][1]\n                c[-1][1] += 1\n            else:\n                c.append([b[i], 1])\n            while d and b[i] < -d[0][0]:\n                d.popleft()\n            if d and b[i] == -d[0][0]:\n                count += d[0][1]\n        else:\n            while c and b[i] < -c[0][0]:\n                c.popleft()\n            if c and b[i] == -c[0][0]:\n                count += c[0][1]\n            while d and d[-1][0] > b[i]:\n                d.pop()\n            if d and d[-1][0] == b[i]:\n                count += d[-1][1]\n                d[-1][1] += 1\n            else:\n                d.append([b[i], 1])\n    return count\nfor _ in range(int(input())):\n    n = int(input())\n    a = [int(i) for i in input().split()]\n    print(check(a, process(a, n), n))"]